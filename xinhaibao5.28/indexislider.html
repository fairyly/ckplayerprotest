<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<title>海报</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"/>
	<link rel="stylesheet" type="text/css" href="css/index.css">
	<link rel="stylesheet" type="text/css" href="css/islider.css">
	<script src="js/jquery.min.js"></script>
	<script src="js/edit.js"></script>
	<script src="js/touch.min.js"></script>
	<style type="text/css">
	    .fileInput{ margin: 0px auto;width:62px;height:62px; background:url(images/upload.png) no-repeat;background-size:60px 60px;overflow:hidden;position:relative;}
		.upfile{position:absolute;top:-100px;}
		.upFileBtn{width:60px;height:60px;opacity:0;filter:alpha(opacity=0);cursor:pointer;}
		.fileInput2{ margin: 0px auto;width:42px;height:42px; background:url(images/upload.png) no-repeat;background-size:40px 40px;overflow:hidden;position:relative;}
		.upfile2{position:absolute;top:-100px;}
		.upFileBtn2{width:40px;height:40px;opacity:0;filter:alpha(opacity=0);cursor:pointer;}
		.fileInput3{ margin: 0px auto;width:82px;height:82px; background:url(images/upload.png) no-repeat;background-size:80px 80px;overflow:hidden;position:relative;top: 160px;}
		.upfile3{position:absolute;top:-100px;}
		.upFileBtn3{width:80px;height:80px;opacity:0;filter:alpha(opacity=0);cursor:pointer;}
		.fileInput4{ margin: 0px auto;width:42px;height:42px; background:url(images/upload.png) no-repeat;background-size:40px 40px;overflow:hidden;position:relative;top: -60px}
		.upfile4{position:absolute;top:-100px;}
		.upFileBtn4{width:40px;height:40px;opacity:0;filter:alpha(opacity=0);cursor:pointer;}
	</style>
	<script type="text/javascript">
	//图片等比例缩小处理
	function AutoResizeImage(maxWidth,maxHeight,objImg){
			var img = new Image();
			img.src = objImg.src;
			var hRatio;
			var wRatio;
			var Ratio = 1;
			var w = img.width;
			var h = img.height;
			wRatio = maxWidth / w;
			hRatio = maxHeight / h;
			if (maxWidth ==0 && maxHeight==0){
			    Ratio = 1;
			    }
			    else if (maxWidth==0){//
			        if (hRatio<1) Ratio = hRatio;
			           }else if (maxHeight==0){
			                 if (wRatio<1) Ratio = wRatio;
			                 }else if (wRatio<1 || hRatio<1){
			                       Ratio = (wRatio<=hRatio?wRatio:hRatio);
			                        }
			if (Ratio<1){
				w = w * Ratio;
				h = h * Ratio;
			    }
			objImg.height = h;
			objImg.width = w;
	}
	</script>
</head>

<body>
	<div class="header">
		<nav>
			<div class="nav">
				<ul>
					<li style="width:28%"><a href="">返回</a></li>
					<li style="width:45%"><a href="">微商海报</a></li>
					<li style="width:22%"><a href="index1.html">首页</a></li>
				</ul>
			</div>
		</nav>
	</div>
	<!-- Outer Canvas 外层画布 -->
	<div id="iSlider-wrapper" style="margin-top:-68px;"></div>
	<div class="more"><div><h2>更多海报模板</h2></div></div>
	<!-- //首页结束 -->
	<!-- 编辑第一个图层 -->
	<div class="edit1" style="display:none">
		<div class="img1">
			<div class="m1" id="m1">
				<img src="images/m1.jpg" onload="AutoResizeImage(500,480,this)"/>
			</div>
			<div class="up1">
				<div class="up11">
					<div class="fileInput left">
				          <input type="file" capture="camera" name="upfile" id="upfile" style="display:none" class="upfile" onchange="document.getElementById('upfileResult').innerHTML=this.value;"/>
				          <input class="upFileBtn" id="upfileResult" type="button" value="上传图片" onclick="document.getElementById('upfile').click();" />
				    </div>
					<!-- <img src="images/upload.png" style="width:60px;height:60px;"> -->
				</div>
				
			</div>
		</div>
		<div class="bg1">
			<div class="titl" style="width:100%;margin: -40px auto;">
				<div class="title1">
					<p contenteditable="true" style="font-size:12px;margin-bottom:2px">红领巾</p>
					<h2 contenteditable="true">红领巾联盟商店</h2>
					<p contenteditable="true" style="width:60%;margin:2px auto;font-size:8px;border-top:1px solid #000;padding-top:2px;">HONGLINGJIN &nbsp LIANMENG &nbsp SHOP</p>
				</div>
			</div>	
			<div class="content1">
				<p style="font-size:10px;color:#fe86a0">微信</p>
				<p contenteditable="true">517578123</p>
				<p style="font-size:10px;color:#fe86a0">QQ</p>
				<p contenteditable="true">517578123</p>
				<p style="font-size:10px;color:#fe86a0">电话</p>
				<p contenteditable="true">12517578123</p>
			</div>
			<div class="img11">
				<div class="m2" style="text-align:center">
					<img src="images/m2.jpg" style="width:80px;height:80px">
				</div>
				<div class="up2">
					<div class="up22">
						<div class="fileInput2">
				          <input type="file" capture="camera" name="upfile2" id="upfile2" style="display:none" class="upfile2" onchange="document.getElementById('upfileResult2').innerHTML=this.value;"/>
				          <input class="upFileBtn2" id="upfileResult2" type="button" value="上传图片" onclick="document.getElementById('upfile2').click();" />
				        </div>
					</div>
					<!-- <img src="images/upload.png" style="width:40px;height:40px;"> -->
				</div>
			</div>
		</div>
		<div class="shengcheng">
			<div><h3>生成</h3></div>
		</div>
	</div>
	<!-- 第一个页面结束 -->
	<div class="edit2" style="display:none">
		<div class="img2">
			<div class="mm2" id="mm2">
				<img src="images/mm1.jpg" onload="AutoResizeImage(480,460,this)"/>
			</div>
			<div class="up3">
				<div class="up33">
					<div class="fileInput3">
				          <input type="file" capture="camera" name="upfile3" id="upfile3" style="display:none" class="upfile3" onchange="document.getElementById('upfileResult3').innerHTML=this.value;"/>
				          <input class="upFileBtn3" id="upfileResult3" type="button" value="上传图片" onclick="document.getElementById('upfile3').click();" />
				    </div>
					<!-- <img src="images/upload.png" style="width:60px;height:60px;"> -->
				</div>
			</div>
		</div>
		<div class="img22">
			<div class="mm22">
				<img src="images/mm2.jpg" style="width:100px;height:100px"/>
				<p style="font-size:12px">扫一扫加我微信</p>
			</div>
			<div class="up4">
				<div class="up44">
					<div class="fileInput4">
				          <input type="file" capture="camera" name="upfile4" id="upfile4" style="display:none" class="upfile4" onchange="document.getElementById('upfileResult4').innerHTML=this.value;"/>
				          <input class="upFileBtn4" id="upfileResult4" type="button" value="上传图片" onclick="document.getElementById('upfile4').click();" />
				    </div>
					<!-- <img src="images/upload.png" style="width:60px;height:60px;"> -->
				</div>
			</div>
		</div>
		<div class="shengcheng2">
			<div><h3>生成</h3></div>
		</div>
	</div>
	<!-- 第二个页面结束 -->
	<div class="edit3" style="display:none">
		<div class="img3">
			<div class="m3">
				<img src="images/mmm1.jpg" onload="AutoResizeImage(320,460,this)"/>
			</div>
		</div>
		<div class="content3"></div>
		<div class="shengcheng3"></div>
	</div>
	<script src="js/islider.js"></script>
	 <!-- <script src="js/iSlider.animate.min.js"></script> -->
	<script type="text/javascript" src="js/islider_plugin.js"></script>
	<script>
		var list = [
			{
				height: 440,
				width: 300,
				content: "images/1.jpg",
			},{
				height: 440,
				width: 300,
				content: "images/2.jpg",
			},{
			 	height: 440,
				width: 300,
			 	content: "images/3.jpg",
			},{
				height: 640,
				width: 300,
				content:"images/4.jpg"
			},{
				height: 640,
				width: 320,
				content:"images/5.jpg"
			},{
				height: 640,
				width: 320,
				content:"images/1.jpg"
			},{
				height: 640,
				width: 320,
				content:"images/2.jpg"
			},{
				height: 640,
				width: 320,
				content:"images/3.jpg"
			},
			{
				height: 640,
				width: 320,
				content:"images/4.jpg"
			},
			];
		
		var opts = {
			type: 'pic',
		    data: list,
		    dom: document.getElementById("iSlider-wrapper"),
		    // isLooping: true,
		    initIndex:1,
		    isDebug:true,
		    isOverspread: 1,
		    animateType: 'flow',
		    onslidechange: function(idx) {
		    	islider.changeIndexDot();
		    }
		};
		var	islider = new iSlider(opts);

		var dotOpt = {
			top: '445px',
			width: '70%',
			diameter: '0.5em',
			borderColor: '#fff',
		};

		islider.renderDot(dotOpt);

	</script>
</body>
</html>
<!-- 添加touch事件 -->
<script type="text/javascript">
		// 获取节点
	  var block = document.getElementById("m1");
	  var oW,oH;
	  // 绑定touchstart事件
	  block.addEventListener("touchstart", function(e) {
	   console.log(e);
	   var touches = e.touches[0];
	   oW = touches.clientX - block.offsetLeft;
	   oH = touches.clientY - block.offsetTop;
	   //阻止页面的滑动默认事件
	   document.addEventListener("touchmove",defaultEvent,false);
	  },false)
	 
	  block.addEventListener("touchmove", function(e) {
	   var touches = e.touches[0];
	   var oLeft = touches.clientX - oW;
	   var oTop = touches.clientY - oH;
	   if(oLeft < 0) {
	    oLeft = 0;
	   }else if(oLeft > document.documentElement.clientWidth - block.offsetWidth) {
	    oLeft = (document.documentElement.clientWidth - block.offsetWidth);
	   }
	   block.style.left = oLeft + "px";
	   block.style.top = oTop + "px";
	  },false);
	   
	  block.addEventListener("touchend",function() {
	   document.removeEventListener("touchmove",defaultEvent,false);
	  },false);
	  function defaultEvent(e) {
	   e.preventDefault();
	  }
	</script>
	<script type="text/javascript">
		// 获取节点
	  touch.on('#mm2', 'touchstart', function(ev){
			ev.preventDefault();
		});

		var target = document.getElementById("mm2");
		var dx, dy;

		touch.on('#mm2', 'drag', function(ev){
			dx = dx || 0;
			dy = dy || 0;
			console.log("当前x值为:" + dx + ", 当前y值为:" + dy +".");
			var offx = dx + ev.x + "px";
			var offy = dy + ev.y + "px";
			this.style.webkitTransform = "translate3d(" + offx + "," + offy + ",0)";
		});

		touch.on('#mm2', 'dragend', function(ev){
			dx += ev.x;
			dy += ev.y;
		});
	</script>